{% extends 'base.html.twig' %}

{% block title %}Cruises{% endblock %}

{% block stylesheets %}<link rel="stylesheet" href="/css/fixedHeader.dataTables.min.css">{% endblock %}

{% block body %}
{#    {% for cruise in cruises %}#}
{#        <p>{{ cruise.destination }}</p>#}
{#    {% endfor %}#}

    <div class="container">
        <h1>Cruises</h1>
    <table class="table-hover table-bordered display" id="myDataTable">
        <thead>
            <tr>
                <th>ID</th>
                <th>Principal Investigator</th>
                <th>Start <br>(y-m-d)</th>
                <th>End <br>(y-m-d)</th>
                <th>Destination</th>
                <th>Memo</th>
                <th>Plan Code</th>
                <th>Ship</th>
                <th>Campaigns</th>
                <th>Number of<br>Trips</th>
            </tr>
        </thead>
        <tbody>
{#            {% set principalInvestigators = [] %}#}
{#            {% for investigator in investigators %}#}
{#                {% set principalInvestigators = principalInvestigators|merge([investigator]) %}#}
{#            {% endfor %}#}
            {% for cruise in cruises %}
                <tr>
                    <td>{{ cruise.cruiseid}}</td>
                    <td>
{#                        {% for investigator in investigators %}#}
{#                                                    {% if investigator.investigatorid == cruise.principalinvestigator %}#}
{#                        {{ cruise.principalinvestigator}}#}
{#                                                    {% endif %}#}
{#                        {% endfor %}#}
                        {{ cruise.principalinvestigator}}
                    </td>
                    <td>{{ cruise.startdate|date('Y-m-d')}}</td>
                    <td>{{ cruise.enddate|date('Y-m-d')}}</td>
                    <td>{{ cruise.destination}}</td>
                    <td>{{ cruise.memo}}</td>
                    <td>{{ cruise.plancode}}</td>
                    <td>{{ cruise.ship}}</td>
                    <td>{% for singleCampaign in cruise.campaign %}
                            {{ singleCampaign.campaign  }}<br>
                            <a href="{{ path('campaign_details', {'campaignId':singleCampaign.campaignid}) }}"><i>More</i></a><br>
                        {% endfor %}</td>
{#                    <td>{% for trip in cruise.trips %}{{ trip.destinationarea }}<br>{% endfor %}</td>#}
                    <td>{{ cruise.trips | length }}</td>

                </tr>


            {% endfor %}
        </tbody>

    </table>
    </div>

{#    {{ dump(investigators) }}#}

{% endblock %}

{% block javascripts %}

    <script src="/js/dataTables.fixedHeader.min.js"></script>
    <script type="text/javascript">
        $(document).ready( function () {
            $('#myDataTable').DataTable({
                // "dom": '<"top"i>rt<"bottom"flp><"clear">',
                fixedHeader: {
                    footer: true
                }
                // "scrollX": true
            });
        } );
    </script>

{% endblock %}
