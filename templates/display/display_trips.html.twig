{% extends 'base.html.twig' %}

{% block title %}Trips{% endblock %}

{% block stylesheets %}
{#    <link rel="stylesheet" href="/css/jquery.dataTables.min.css">#}
{#    <link rel="stylesheet" type="text/css" href="/css/datatables.min.css"/>#}

{#    <link rel="stylesheet" href="/css/fixedHeader.dataTables.min.css">#}
    <link rel="stylesheet" href="/css/datatables.min.css">
    <link rel="stylesheet" href="/css/fixedHeader.dataTables.min.css">

{% endblock %}

{% block body %}

    <div class="container">
        <h1>Trips</h1>

        <table class="table-hover table-bordered display" id="myDataTable">
            <thead>
            {% set headerRow =
                "<tr>
                <th>Start Date [Nb days]</th>

                <th>Destination</th>

                <th>Cruise Plancode</th>
                <th>Stations count</th>
                <th>Status</th>
                <th>Ship</th>

            </tr>"
            %}
            {{ headerRow | raw }}

            </thead>
            <tbody>
            {% for trip in trips %}
                <tr>
                    <td><span style="display:none">{{ trip.startdate|date('Y/m/d')}}</span>{{ trip.startdate|date('d/m/Y')}}
                        {% if trip.startdate is not null and trip.enddate is not null %}
                            {% set diffDays = date(trip.startdate).diff(date(trip.enddate)) %}
                            {% set displayDiffDay = '[' + ()diffDays.days + 1) + ']' %}
                            {{displayDiffDay}}
                            {#                            {% if diffDays.days > 0 %} (multi-day) {% else %} (single day) {% endif %}#}
                        {% endif %}
                        <a href="{{path('trip_details', {'tripId': trip.tripid})}}"><i class="fa fa-info-circle"></i></a>
                    </td>



                    <td>{{ trip.destinationarea }}</td>

                    <td>{% if trip.cruiseid is not null %}
                            {{ trip.cruiseid.plancode }} <a href="{{path('cruise_details', {'cruiseId': trip.cruiseid.cruiseid})}}"><i class="fa fa-info-circle"></i></a>
                        {% else %}  NA {% endif %}


                    </td>
                    <td>{{ trip.tripstations |length }}</td>
                    <td>{{ trip.status }}-{{ trip.tripid }} </td>
                    <td>{{ trip.ship }}</td>


                </tr>
            {% endfor %}
            </tbody>
            <tfoot> {{ headerRow | raw }}</tfoot>


        </table>
    </div>


{% endblock %}

{% block javascripts %}
    <script type="text/javascript" src="/js/datatables.min.js"></script>
    <script type="text/javascript" src="/js/myDataTable/tableSearchHeaders.js"></script>
{#    <script type="text/javascript" src="/js/datatables.min.js"></script>#}
{#    <script src="/js/myDataTable/tableSearchHeaders.js"></script>#}

{% endblock %}

