{% extends 'base.html.twig' %}

{% block title %}Campaigns{% endblock %}

{% block stylesheets %}<link rel="stylesheet" href="/css/fixedHeader.dataTables.min.css">{% endblock %}


{% block body %}

<div class="container">
    <h3>Campaign description</h3>
    <h2>"{{ campaign.campaign |convert_encoding('UTF-8','CP1252') }}" </h2>
    <p>Midas db ID: {{ campaign.campaignid }}</p>
    <h2>Memo:</h2>
    <p><i>{{ campaign.memo |convert_encoding('UTF-8','CP1252') }}</i></p>
    <h3>Imis Project Number: {{ campaign.imisprojectnr }}</h3>
    <h3>Cruises</h3>

    {% set nameOfPresentCampaign =campaign.campaign %}

    <table class="table-hover table-bordered display" id="myDataTable">
        <thead>
            <tr>
                <th></th>
                <th class="searchable">Start date</th>
                <th>End date</th>
                <th>Shared campaigns</th>
            </tr>

        </thead>
{#        {{ dump(cruises) }}#}
        <tbody>
        {% for cruise in cruises|sort %}
{#            ((a,b)=>a.startdate<=>b.startdate)#}
            <tr>
                <td><a href="{{path('cruise_details', {'cruiseId': cruise.cruiseid})}}"><i class="fa fa-info-circle"></a></td>
                <td><span style="display: none">{{ cruise.startdate |date("Y/m/d") }}</span>{{ cruise.startdate |date("d/m/Y") }} </td>
                <td>{{ cruise.enddate |date("d/m/Y") }} </td>
                <td>
                    {% for singleCampaign in cruise.campaign %}
                        {% if singleCampaign.campaign != nameOfPresentCampaign %}
                            {{ singleCampaign.campaign  }}

                            <a href="{{ path('campaign_details', {'campaignId':singleCampaign.campaignid}) }}"><i class="fa fa-info-circle"></i></a><br>
                        {% endif %}
                    {% endfor %}
                </td>

            </tr>
        {% endfor %}
        </tbody>

    </table>



</div>

{% endblock %}

{% block javascripts %}

<script src="/js/dataTables.fixedHeader.min.js"></script>
<script type="text/javascript">
    $(document).ready( function () {
        $('#myDataTable').DataTable({
            // "dom": '<"top"i>rt<"bottom"flp><"clear">',
            fixedHeader: {
                footer: true
            }
            // "scrollX": true
        });
    } );
</script>

{% endblock %}